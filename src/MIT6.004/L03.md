# L03 Compiling Code, Procedures, and Stacks

---

MIT 6.004 Spring 2019 L03 Compiling Code, Procedures, and Stacks，由Silvina Hanono Wachman讲述。

本次讲座继续深入讨论了如何将高级编程语言转换成汇编语言，并开始探索如何处理程序（Procedures）。

## 主要内容

### 1. **指令集回顾**

   到目前为止，学习了几种RISC-V指令集架构中的指令类型：

- 计算指令（ALU操作），包括寄存器-寄存器操作和寄存器-立即数操作
- 控制流指令，包括无条件跳转和条件分支
- 加载和存储指令，用于在内存和寄存器之间传输信息
- 新引入了加载上半部分立即数（Load Upper Immediate）指令，以解决常量大小的限制问题。

### 2. **C语言到汇编语言的转换**

   详细讲解了将C语言代码转换成汇编语言的步骤，包括变量到寄存器的分配、将复杂操作分解为简单操作等。

### 3. **编译条件和循环语句**

   提供了方法论，解释了如何将if-then、if-then-else和while循环等高级语言构造转换为汇编语言。

### 4. **程序（Procedures）实现**

   讨论了程序实现的关键要素，包括入口点、参数传递、局部存储和退出点。特别强调了使用栈和激活记录来管理程序调用所需的信息，以及如何处理嵌套程序调用。

### 5. **调用约定（Calling Convention）**

   引入了调用约定，详细规定了哪些寄存器由调用者保存，哪些由被调用者保存。定义了专门的寄存器用于参数传递和返回值。

### 6. **程序调用和返回示例**

   通过计算最大公约数（GCD）的程序示例，展示了如何实现程序的调用和返回，以及如何通过跳转和链接指令（Jump and Link）来保存和恢复程序执行的上下文。

## 总结

本讲座通过深入讲解汇编语言的核心概念和技巧，重点介绍了程序的实现和管理。通过具体的示例，为学生提供了将理论知识应用于实践的基础，特别是在程序处理方面的详细指导和实践技巧。
